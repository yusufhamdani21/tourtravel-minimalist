// Translation data
        const translations = {
            en: {
                nav: {
                    destinations: "Destinations",
                    services: "Services", 
                    gallery: "Gallery",
                    about: "About",
                    contact: "Contact",
                    book: "Book Now ‚Üí"
                },
                hero: {
                    title: "Travel Like You",
                    titleAccent: "Mean It",
                    subtitle: "Discover breathtaking destinations, create unforgettable memories, and embark on adventures that will change your perspective forever.",
                    explore: "Explore Destinations",
                    learn: "Learn More",
                    cards: {
                        bestBus: "The Best Bus Fleet",
                        enjoyTrip: "Enjoy Your Trip",
                        holiday: "Explore Your Holiday"
                    }
                },
                features: {
                    title: "Why Choose Zena?",
                    subtitle: "We provide exceptional travel experiences with personalized service and attention to detail",
                    best: {
                        title: "Best Travel Provider",
                        desc: "We're committed to making every vacation a memorable one. With our utmost attention to your memories and experiences, we ensure every step of your trip is smooth and enjoyable."
                    },
                    agent: {
                        title: "Experienced Agent Services", 
                        desc: "With extensive experience, our team is ready to provide the best solutions for your every need. Customer satisfaction is our priority, as evidenced by the many repeat customers who return after using our services. Every challenge we've faced has strengthened our commitment to providing exceptional service."
                    },
                    enjoy: {
                        title: "Enjoy a Carefree Vacation",
                        desc: "Experience true freedom while on vacation! With comprehensive service across every aspect, you won't have to worry about anything. Let us handle all the details, so you can focus on enjoying every precious moment."
                    },
                    personal: {
                        title: "Premium and Personal Service",
                        desc: "Experience the difference with our exceptional and personalized service! We prioritize each customer's unique needs, ensuring every experience during your trip is exceptional."
                    }
                },
                destinations: {
                    title: "Popular Destinations",
                    subtitle: "Handpicked destinations for unforgettable experiences",
                    bandung: {
                        title: "Bandung",
                        location: "üìç Indonesia",
                        desc: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Illo deserunt esse temporibus nisi fuga iusto assumenda quasi maxime!",
                        price: "From Rp 2.000.000"
                    },
                    jakarta: {
                        title: "Jakarta", 
                        location: "üìç Indonesia",
                        desc: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Illo deserunt esse temporibus nisi fuga iusto assumenda quasi maxime!",
                        price: "From Rp 3.000.000"
                    },
                    surabaya: {
                        title: "Surabaya",
                        location: "üìç Indonesia", 
                        desc: "Lorem ipsum dolor sit amet consectetur adipisicing elit. Illo deserunt esse temporibus nisi fuga iusto assumenda quasi maxime!",
                        price: "From Rp 4.000.000"
                    }
                },
                gallery: {
                    title: "Travel Gallery",
                    subtitle: "Moments captured from our travelers' incredible journeys",
                    fun: "Have Fun with Us",
                    notif: "Caution Notification",
                    comport: "Comportable Sheet",
                    good: "Good Car for Your Travel Journey",
                    play: "Include Game Play for Family or Company"
                },
                footer: {
                    description: "Your trusted travel partner for creating unforgettable adventures and meaningful connections around the world.",
                    quickLinks: "Quick Links",
                    services: "Services", 
                    contact: "Contact Info",
                    customTours: "Custom Tours",
                    groupTravel: "Group Travel",
                    adventurePackages: "Adventure Packages", 
                    luxuryTravel: "Luxury Travel",
                    travelInsurance: "Travel Insurance",
                    copyright: "¬© 2025 ZENA. All rights reserved. | Privacy Policy | Terms of Service"
                },
                span:{
                    waHelp: "Need Help? Chat with us!",
                    about:{
                        title:"‚ú® About Us"
                    }
                },
                about: {
                    title:"About Zena Travel",
                    description:"With over 10 years of experience in the travel industry, Zena has become Indonesia's most trusted travel partner. We specialize in creating personalized travel experiences that go beyond ordinary tourism.",
                    stats:{
                        yearsLabel:"Years Experience",
                        destinationsLabel:"Destinations",
                        customersLabel:"Happy Customers",
                        toursLabel:"Successful Tours"
                    },
                    mission:"Our mission is to make travel accessible, enjoyable, and memorable for everyone. From family vacations to corporate retreats, we handle every detail so you can focus on creating lasting memories."
                }
            },
            id: {
                nav: {
                    destinations: "Destinasi",
                    services: "Layanan",
                    gallery: "Galeri", 
                    about: "Tentang",
                    contact: "Kontak",
                    book: "Pesan Sekarang ‚Üí"
                },
                hero: {
                    title: "Berwisata Seperti Yang",
                    titleAccent: "Anda Inginkan", 
                    subtitle: "Temukan destinasi menakjubkan, ciptakan kenangan tak terlupakan, dan mulai petualangan yang akan mengubah perspektif Anda selamanya.",
                    explore: "Jelajahi Destinasi",
                    learn: "Pelajari Lebih Lanjut",
                    cards: {
                        bestBus: "Armada Bus Terbaik",
                        enjoyTrip: "Nikmati Perjalanan",
                        holiday: "Liburan jadi lebih menyenangkan"
                    }
                },
                features: {
                    title: "Mengapa Memilih Zena?",
                    subtitle: "Kami menyediakan pengalaman perjalanan luar biasa dengan layanan personal dan perhatian terhadap detail",
                    best: {
                        title: "Penyedia Perjalanan Terbaik",
                        desc: "Kami berkomitmen untuk menjadikan setiap liburan tak terlupakan. Dengan perhatian penuh kami terhadap kenangan dan pengalaman Anda, kami memastikan setiap langkah perjalanan Anda lancar dan menyenangkan."
                    },
                    agent: {
                        title: "Layanan Agent Berpengalaman",
                        desc: "Dengan jam terbang yang tinggi, tim kami siap memberikan solusi terbaik untuk setiap kebutuhan Anda. Kepuasan pelanggan adalah prioritas kami, terbukti dari banyaknya pelanggan yang terus kembali setelah menggunakan jasa kami. Setiap tantangan yang kami hadapi telah memperkuat komitmen kami untuk memberikan layanan luar biasa. "
                    },
                    enjoy: {
                        title: "Nikmati Liburan Tanpa Beban",
                        desc: "Rasakan kebebasan sejati saat berlibur! Dengan pelayanan menyeluruh di setiap aspek, Anda tidak perlu repot mengurus berbagai hal. Biarkan kami yang menangani semua detail, sehingga Anda bisa fokus menikmati setiap momen berharga."
                    },
                    personal:{
                        title:"Pelayanan Premium dan Personal",
                        desc:"Rasakan perbedaan dengan pelayanan terbaik dan personal yang kami tawarkan! Kami mengutamakan kebutuhan unik setiap pelanggan, memastikan setiap pengalaman Anda selama perjalanan terasa istimewa. "
                    }
                },
                destinations: {
                    title: "Destinasi Populer", 
                    subtitle: "Destinasi pilihan untuk pengalaman tak terlupakan",
                    sby: {
                        title: "Surabaya",
                        location: "üìç Indonesia",
                        desc: "Rasakan pemandangan gunung yang menakjubkan dan aktivitas luar ruang yang mendebarkan di jantung Alps.",
                        price: "Mulai dari $2,499"
                    },
                    bdg: {
                        title: "Bandung",
                        location: "üìç Indonesia", 
                        desc: "Bersantai di bungalo di atas air dan menyelam di perairan jernih Samudra Hindia.",
                        price: "Mulai dari $3,299"
                    },
                    jkt: {
                        title: "Jakarta",
                        location: "üìç Indonesia",
                        desc: "Berjalan melalui sejarah dan temukan keindahan abadi Kota Abadi.", 
                        price: "Mulai dari $1,899"
                    }
                },
                gallery: {
                    title: "Galeri Perjalanan",
                    subtitle: "Momen yang diabadikan dari perjalanan luar biasa para wisatawan kami",
                    fun: "Bersenag-senanglah",
                    notif: "Pemberitahuan untuk perhatian",
                    comport: "Tempat duduk dengan lembaran yang nyaman",
                    good: "Armada Terbaik",
                    play: "Termasuk permainan seru untuk keluarga dan kantor"
                },
                footer: {
                    description: "Partner perjalanan terpercaya Anda untuk menciptakan petualangan tak terlupakan dan koneksi bermakna di seluruh dunia.",
                    quickLinks: "Tautan Cepat",
                    services: "Layanan",
                    contact: "Info Kontak", 
                    customTours: "Tur Kustom",
                    groupTravel: "Perjalanan Grup",
                    adventurePackages: "Paket Petualangan",
                    luxuryTravel: "Perjalanan Mewah", 
                    travelInsurance: "Asuransi Perjalanan",
                    copyright: "¬© 2025 ZENA. Semua hak dilindungi. | Kebijakan Privasi | Syarat Layanan"
                },
                span: {
                    waHelp: "Butuh bantuan? Chat dengan kami!",
                    about:{
                        title:"‚ú® Tentang Kami"
                    },
                    protour:"Pemandu Wisata Profesional",
                    cs:"Dukungan Pelanggan 24/7",
                    price:"Jaminan Harga Terbaik"
                },
                about: {
                    title:"Tentang Zena Travel",
                    description:"Dengan pengalaman lebih dari 10 tahun di industri perjalanan, Zena telah menjadi mitra perjalanan paling tepercaya di Indonesia. Kami berspesialisasi dalam menciptakan pengalaman perjalanan personal yang melampaui pariwisata biasa.",
                    stats:{
                        yearsLabel:"Pengalaman",
                        destinationsLabel:"Destinasi",
                        customersLabel:"Kepuasan Pelanggan",
                        toursLabel:"Tingkat Keberhasilan Tour"
                    },
                    mission:"Misi kami adalah menjadikan perjalanan mudah diakses, menyenangkan, dan berkesan bagi semua orang. Dari liburan keluarga hingga retret perusahaan, kami mengurus setiap detailnya agar Anda dapat fokus menciptakan kenangan abadi.",
                    badge:"Tahun Pengalaman"
                }
            }
        };

        // Theme management
        class ThemeManager {
            constructor() {
                this.theme = this.getStoredTheme() || 'light';
                this.initTheme();
                this.initToggle();
            }

            getStoredTheme() {
                try {
                    return localStorage.getItem('ZENA-theme');
                } catch (e) {
                    return null;
                }
            }

            setStoredTheme(theme) {
                try {
                    localStorage.setItem('ZENA-theme', theme);
                } catch (e) {
                    console.warn('Unable to save theme preference');
                }
            }

            initTheme() {
                document.documentElement.setAttribute('data-theme', this.theme);
                this.updateToggleIcon();
            }

            initToggle() {
                const toggle = document.getElementById('themeToggle');
                if (toggle) {
                    toggle.addEventListener('click', () => this.toggleTheme());
                }
            }

            toggleTheme() {
                this.theme = this.theme === 'light' ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', this.theme);
                this.setStoredTheme(this.theme);
                this.updateToggleIcon();
            }

            updateToggleIcon() {
                const slider = document.getElementById('themeSlider');
                if (slider) {
                    slider.textContent = this.theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
                }
            }
        }

        // Language management
        class LanguageManager {
            constructor() {
                this.currentLang = this.getStoredLanguage() || 'en';
                this.initLanguage();
                this.initSelector();
            }

            getStoredLanguage() {
                try {
                    return localStorage.getItem('ZENA-language');
                } catch (e) {
                    return null;
                }
            }

            setStoredLanguage(lang) {
                try {
                    localStorage.setItem('ZENA-language', lang);
                } catch (e) {
                    console.warn('Unable to save language preference');
                }
            }

            initLanguage() {
                this.updateLanguage();
                this.updateSelector();
            }

            initSelector() {
                const btn = document.getElementById('languageBtn');
                const dropdown = document.getElementById('languageDropdown');
                const options = document.querySelectorAll('.language-option');

                if (btn && dropdown) {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        dropdown.classList.toggle('active');
                    });

                    options.forEach(option => {
                        option.addEventListener('click', () => {
                            const lang = option.dataset.lang;
                            this.setLanguage(lang);
                            dropdown.classList.remove('active');
                        });
                    });

                    // Close dropdown when clicking outside
                    document.addEventListener('click', () => {
                        dropdown.classList.remove('active');
                    });
                }
            }

            setLanguage(lang) {
                this.currentLang = lang;
                this.setStoredLanguage(lang);
                this.updateLanguage();
                this.updateSelector();
            }

            updateLanguage() {
                const elements = document.querySelectorAll('[data-translate]');
                elements.forEach(element => {
                    const key = element.dataset.translate;
                    const translation = this.getNestedTranslation(key);
                    if (translation) {
                        element.textContent = translation;
                    }
                });
            }

            updateSelector() {
                const currentLangBtn = document.getElementById('currentLang');
                const options = document.querySelectorAll('.language-option');
                
                if (currentLangBtn) {
                    // Update button text
                    const langText = this.currentLang === 'en' ? 'üá∫üá∏ EN' : 'üáÆüá© ID';
                    currentLangBtn.textContent = langText;
                }

                // Update active option
                options.forEach(option => {
                    option.classList.toggle('active', option.dataset.lang === this.currentLang);
                });
            }

            getNestedTranslation(key) {
                const keys = key.split('.');
                let translation = translations[this.currentLang];
                
                for (const k of keys) {
                    if (translation && translation[k]) {
                        translation = translation[k];
                    } else {
                        return null;
                    }
                }
                
                return translation;
            }
        }
        
        // Video Gallery Manager
        class VideoGalleryManager {
            constructor() {
                this.initVideoGallery();
            }

            initVideoGallery() {
                const videoItems = document.querySelectorAll('.gallery-item.video');
                const modal = document.getElementById('videoModal');
                const modalVideo = document.getElementById('modalVideo');
                const closeBtn = document.getElementById('videoModalClose');

                videoItems.forEach(item => {
                    const playBtn = item.querySelector('.video-play-button');
                    const videoSrc = item.dataset.video;

                    if (playBtn && videoSrc) {
                        playBtn.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.openVideoModal(videoSrc, modal, modalVideo);
                        });
                    }
                });

                if (closeBtn && modal) {
                    closeBtn.addEventListener('click', () => {
                        this.closeVideoModal(modal, modalVideo);
                    });

                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            this.closeVideoModal(modal, modalVideo);
                        }
                    });
                }

                // Close modal with Escape key
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && modal.classList.contains('active')) {
                        this.closeVideoModal(modal, modalVideo);
                    }
                });
            }

            openVideoModal(videoSrc, modal, modalVideo) {
                modalVideo.src = videoSrc;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                modalVideo.play();
            }

            closeVideoModal(modal, modalVideo) {
                modal.classList.remove('active');
                modalVideo.pause();
                modalVideo.src = '';
                document.body.style.overflow = '';
            }
        }

        // Mobile menu management
        class MobileMenuManager {
            constructor() {
                this.initMobileMenu();
            }

            initMobileMenu() {
                const mobileBtn = document.getElementById('mobileMenuBtn');
                const navMenu = document.getElementById('navMenu');

                if (mobileBtn && navMenu) {
                    mobileBtn.addEventListener('click', () => {
                        navMenu.classList.toggle('active');
                        mobileBtn.textContent = navMenu.classList.contains('active') ? '‚úï' : '‚ò∞';
                    });

                    // Close mobile menu when clicking on a link
                    const navLinks = navMenu.querySelectorAll('.nav-link');
                    navLinks.forEach(link => {
                        link.addEventListener('click', () => {
                            navMenu.classList.remove('active');
                            mobileBtn.textContent = '‚ò∞';
                        });
                    });
                }
            }
        }

        // Initialize managers
        const themeManager = new ThemeManager();
        const languageManager = new LanguageManager();
        const mobileMenuManager = new MobileMenuManager();

        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.getElementById('header');
            if (header) {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            }
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const headerHeight = document.querySelector('.header')?.offsetHeight || 70;
                    const targetPosition = target.offsetTop - headerHeight;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        document.addEventListener('DOMContentLoaded', () => {
            new VideoGalleryManager();
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe elements for animation
        document.addEventListener('DOMContentLoaded', function() {
            const animatedElements = document.querySelectorAll('.feature-card, .destination-card, .gallery-item, .stat-item');
            animatedElements.forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                // el.style.transitionDelay = `${index * 0.1}s`;
                observer.observe(el);
            });
        });

        // Parallax effect for hero cards
        // let ticking = false;
        // function updateParallax() {
        //     const scrolled = window.pageYOffset;
        //     const travelCards = document.querySelectorAll('.travel-card');
            
        //     travelCards.forEach((card, index) => {
        //         const speed = (index + 1) * 0.05;
        //         card.style.transform = `translateY(${scrolled * speed}px)`;
        //     });
        //     ticking = false;
        // }

        // window.addEventListener('scroll', function() {
        //     if (!ticking) {
        //         requestAnimationFrame(updateParallax);
        //         ticking = true;
        //     }
        // });

        class HeroCarousel {
            constructor() {
                this.currentSlide = 0;
                this.totalSlides = 3;
                this.slidesContainer = document.getElementById('carouselSlides');
                this.indicators = document.querySelectorAll('.indicator');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                this.autoSlideInterval = null;
                
                this.init();
            }

            init() {
        
                // Add indicator click events
                this.indicators.forEach((indicator, index) => {
                    indicator.addEventListener('click', () => this.goToSlide(index));
                });

                // Start auto-slide
                this.startAutoSlide();

                // Pause auto-slide on hover
                const carousel = document.querySelector('.carousel-container');
                carousel.addEventListener('mouseenter', () => this.stopAutoSlide());
                carousel.addEventListener('mouseleave', () => this.startAutoSlide());

                // Keyboard navigation
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') this.prevSlide();
                    if (e.key === 'ArrowRight') this.nextSlide();
                });

                // Touch/swipe support
                this.addTouchSupport();
            }

            goToSlide(slideIndex) {
                this.currentSlide = slideIndex;
                const translateX = -slideIndex * 33.333;
                this.slidesContainer.style.transform = `translateX(${translateX}%)`;
                this.updateIndicators();
            }

            nextSlide() {
                this.currentSlide = (this.currentSlide + 1) % this.totalSlides;
                this.goToSlide(this.currentSlide);
            }

            prevSlide() {
                this.currentSlide = (this.currentSlide - 1 + this.totalSlides) % this.totalSlides;
                this.goToSlide(this.currentSlide);
            }

            updateIndicators() {
                this.indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === this.currentSlide);
                });
            }

            startAutoSlide() {
                this.autoSlideInterval = setInterval(() => {
                    this.nextSlide();
                }, 5500); // Change slide every 4 seconds
            }

            stopAutoSlide() {
                if (this.autoSlideInterval) {
                    clearInterval(this.autoSlideInterval);
                    this.autoSlideInterval = null;
                }
            }

            addTouchSupport() {
            let startX = 0;
            let endX = 0;
            const threshold = 50; 
            const carousel = document.querySelector('.hero-carousel');

            carousel.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                this.stopAutoSlide(); // Jeda auto-slide saat interaksi
            }, { passive: true });

            carousel.addEventListener('touchmove', (e) => {
                endX = e.touches[0].clientX;
                // Tambahkan efek mengikuti jari
                const diff = startX - endX;
                const translateX = -this.currentSlide * 33.333 - (diff / window.innerWidth * 33.333);
                this.slidesContainer.style.transform = `translateX(${translateX}%)`;
            }, { passive: true });

            carousel.addEventListener('touchend', (e) => {
                endX = e.changedTouches[0].clientX;
                const diff = startX - endX;

                if (Math.abs(diff) > threshold) {
                    if (diff > 0) {
                        this.nextSlide();
                    } else {
                        this.prevSlide();
                    }
                } else {
                    // Kembali ke slide saat ini jika swipe tidak cukup jauh
                    this.goToSlide(this.currentSlide);
                }
                
                // Lanjutkan auto-slide setelah 5.5 detik
                setTimeout(() => this.startAutoSlide(), 5500);
            }, { passive: true });

            
            let isMouseDown = false;
            
            carousel.addEventListener('mousedown', (e) => {
                isMouseDown = true;
                startX = e.clientX;
                this.stopAutoSlide();
            });

            carousel.addEventListener('mousemove', (e) => {
                if (!isMouseDown) return;
                endX = e.clientX;
                const diff = startX - endX;
                const translateX = -this.currentSlide * 33.333 - (diff / window.innerWidth * 33.333);
                this.slidesContainer.style.transform = `translateX(${translateX}%)`;
            });

            carousel.addEventListener('mouseup', (e) => {
                if (!isMouseDown) return;
                isMouseDown = false;
                endX = e.clientX;
                const diff = startX - endX;

                if (Math.abs(diff) > threshold) {
                    if (diff > 0) {
                        this.nextSlide();
                    } else {
                        this.prevSlide();
                    }
                } else {
                    this.goToSlide(this.currentSlide);
                }
                
                setTimeout(() => this.startAutoSlide(), 2000);
            });

            carousel.addEventListener('mouseleave', () => {
                if (isMouseDown) {
                    isMouseDown = false;
                    this.goToSlide(this.currentSlide);
                    setTimeout(() => this.startAutoSlide(), 2000);
                }
            });
        }
        }

        // Initialize carousel when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new HeroCarousel();
        });

        // Add hover effects to cards
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.feature-card, .destination-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
        });

        // Loading animation
        window.addEventListener('load', function() {
            document.body.style.opacity = '1';
            document.body.style.transition = 'opacity 0.5s ease';
        });

        // Keyboard navigation support
        document.addEventListener('keydown', function(e) {
            // Escape key closes dropdowns
            if (e.key === 'Escape') {
                const activeDropdown = document.querySelector('.language-dropdown.active');
                if (activeDropdown) {
                    activeDropdown.classList.remove('active');
                }
                
                const activeMobileMenu = document.querySelector('.nav-menu.active');
                if (activeMobileMenu) {
                    activeMobileMenu.classList.remove('active');
                    const mobileBtn = document.getElementById('mobileMenuBtn');
                    if (mobileBtn) mobileBtn.textContent = '‚ò∞';
                }
            }
        });

        // Accessibility improvements
        document.addEventListener('DOMContentLoaded', function() {
            // Add ARIA labels
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.setAttribute('aria-label', 'Toggle dark mode');
                themeToggle.setAttribute('role', 'button');
                themeToggle.setAttribute('tabindex', '0');
                
                // Keyboard support for theme toggle
                themeToggle.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        themeManager.toggleTheme();
                    }
                });
            }

            const languageBtn = document.getElementById('languageBtn');
            if (languageBtn) {
                languageBtn.setAttribute('aria-label', 'Select language');
                languageBtn.setAttribute('aria-expanded', 'false');
                
                // Update aria-expanded when dropdown toggles
                const dropdown = document.getElementById('languageDropdown');
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                            const isActive = dropdown.classList.contains('active');
                            languageBtn.setAttribute('aria-expanded', isActive);
                        }
                    });
                });
                
                if (dropdown) {
                    observer.observe(dropdown, { attributes: true });
                }
            }
        });

        // Error handling for missing elements
        function safeQuerySelector(selector) {
            try {
                return document.querySelector(selector);
            } catch (e) {
                console.warn(`Element not found: ${selector}`);
                return null;
            }
        }

        // Debounce function for performance
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Resize handler with debounce
        const handleResize = debounce(function() {
            // Handle any resize-specific logic here
            const navMenu = document.getElementById('navMenu');
            const mobileBtn = document.getElementById('mobileMenuBtn');
            
            if (window.innerWidth >= 768 && navMenu && mobileBtn) {
                navMenu.classList.remove('active');
                mobileBtn.textContent = '‚ò∞';
            }
        }, 250);

        // WhatsApp Function
        function openWhatsApp() {
            const phoneNumber = "6281123445070"; // Ganti dengan nomor WhatsApp Anda
            const message = "Halo Zena Travel! Saya tertarik untuk bertanya tentang paket tour Anda.";
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
        }

        // Buat tombol
        const backToTopBtn = document.createElement('div');
        backToTopBtn.className = 'back-to-top';
        backToTopBtn.innerHTML = '‚Üë';
        document.body.appendChild(backToTopBtn);

        // Tampilkan/sembunyikan tombol saat scroll
        window.addEventListener('scroll', () => {
        if (window.pageYOffset > 4000) {
            backToTopBtn.classList.add('active');
        } else {
            backToTopBtn.classList.remove('active');
        }
        });

        // Fungsi scroll ke atas
        backToTopBtn.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
        });

        // Add click animation to WhatsApp button
        document.getElementById('whatsappFloat').addEventListener('click', function() {
            const button = this.querySelector('.whatsapp-button');
            button.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                button.style.transform = '';
            }, 150);
        });

        window.addEventListener('resize', handleResize);